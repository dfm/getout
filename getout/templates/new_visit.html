{% extends "base.html" %}

{% block title -%}GetOut &mdash; New visit{%- endblock %}

{% block content %}

<div class="container signup">
    <div id="map-canvas"></div>
    <form action="" method="POST">
        <input type="text" id="location" name="location" placeholder="Where are you?" required>
        <input type="text" name="comment" placeholder="Comment (optional)">
        <input type="submit" value="Log your visit">
    </form>
</div>


<script src="{{ url_for('static', filename='js/jquery-1.11.3.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/typeahead.bundle.min.js') }}"></script>
<!-- <script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script> -->
<script>
// var map;
// function initialize() {
//   var mapOptions = {
//     zoom: 15,
//     disableDefaultUI: true,
//     zoomControl: true,
//     styles: [{
//         featureType: "poi.business",
//         stylers: [{ visibility: "off" }]
//     }]
//   };
//   map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
//
//   // Try HTML5 geolocation
//   if(navigator.geolocation) {
//     navigator.geolocation.getCurrentPosition(function(position) {
//       var pos = new google.maps.LatLng(position.coords.latitude,
//                                        position.coords.longitude);
//       var c1 = {
//           path: google.maps.SymbolPath.CIRCLE,
//           scale: 8,
//           fillColor: "steelblue",
//           fillOpacity: 0.5,
//           strokeWeight: 0
//       }
//
//       var c2 = {
//           path: google.maps.SymbolPath.CIRCLE,
//           scale: 4,
//           fillColor: "steelblue",
//           fillOpacity: 1,
//           strokeColor: "white",
//           strokeWeight: 1.5
//       }
//
//       var lineCoordinates = [pos, pos];
//       var line = new google.maps.Polyline({
//           path: lineCoordinates,
//           icons: [
//           {
//               icon: c1,
//               offset: '0%'
//           }, {
//               icon: c2,
//               offset: '0%'
//         }
//           ],
//           map: map
//       });
//
//       map.setCenter(pos);
//     }, function() {
//       handleNoGeolocation(true);
//     });
//   } else {
//     // Browser doesn't support Geolocation
//     handleNoGeolocation(false);
//   }
// }
//
// function handleNoGeolocation(errorFlag) {
//   if (errorFlag) {
//     var content = 'Error: The Geolocation service failed.';
//   } else {
//     var content = 'Error: Your browser doesn\'t support geolocation.';
//   }
//
//   var options = {
//     map: map,
//     position: new google.maps.LatLng(60, 105),
//     content: content
//   };
//
//   var infowindow = new google.maps.InfoWindow(options);
//   map.setCenter(options.position);
// }
// google.maps.event.addDomListener(window, 'load', initialize);

//
// Auto-complete.
//

var states = ['Alabama', 'Alaska', 'Arizona', 'Arkansas', 'California',
  'Colorado', 'Connecticut', 'Delaware', 'Florida', 'Georgia', 'Hawaii',
  'Idaho', 'Illinois', 'Indiana', 'Iowa', 'Kansas', 'Kentucky', 'Louisiana',
  'Maine', 'Maryland', 'Massachusetts', 'Michigan', 'Minnesota',
  'Mississippi', 'Missouri', 'Montana', 'Nebraska', 'Nevada', 'New Hampshire',
  'New Jersey', 'New Mexico', 'New York', 'North Carolina', 'North Dakota',
  'Ohio', 'Oklahoma', 'Oregon', 'Pennsylvania', 'Rhode Island',
  'South Carolina', 'South Dakota', 'Tennessee', 'Texas', 'Utah', 'Vermont',
  'Virginia', 'Washington', 'West Virginia', 'Wisconsin', 'Wyoming'
];

states = new Bloodhound({
    datumTokenizer: Bloodhound.tokenizers.whitespace,
    queryTokenizer: Bloodhound.tokenizers.whitespace,
    // `states` is an array of state names defined in "The Basics"
    local: states
});

$('#location').typeahead({
    hint: true,
    highlight: true,
    minLength: 1
},
{
    name: 'states',
    source: states,
    templates: {
        footer: "<div class=\"tt-suggestion\">Add new location?</div>"
    }
});

</script>

{% endblock %}
